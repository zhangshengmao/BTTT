<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/> 
        <title>小票打印</title>
        <script type="text/javascript" src="../jquery-3.2.1.js"></script>
        <style type="text/css">
        *{padding:0;margin: 0;}
        h1{font-size: 20px;}
        h3{font-size: 16px;}
        .left{float: left;}
        .right{float:right;}
        .clearfix{clear: both;}
        ul{list-style: none;}
        .print_container{padding: 20px;width: 188px;}
      
        .section2 label{ display: block; }
        .section3 label{display: block;}
      
        .section4 .total label{display: block;}
        .section4 .other_fee{border-bottom: 1px solid #DADADA;}
        .section5 label{display: block;}
        </style>
    </head>
    <body style="background-color:#fff;">
        <div class="print_container">
            <h1>给顾客专用</h1>
            <span>**************************</span>
            <div class="section1">
                <h3>超市打印小票</h3>
                <h3>在线支付预约</h3>
            </div>
            <span>**************************</span>
            <div class="section2">
                <label>期望送达时间：5678</label>
                <label>订单备注：1111</label>
            </div>
            <span>**************************</span>
            <div class="section3">
                <label>订单编号：</label>
                <label>下单时间：</label>
            </div>
            <span>**************************</span>
            <div class="section4">
                <div style="border-bottom: 1px solid #DADADA;">
                    <!--<ul>
                        <div>菜单名称     数量    金额</div>
                        <li>米饭米饭 米饭 米饭 米饭 米饭 米饭       2    28元</li>
                        <li>米饭      2    28元</li>
                    </ul>-->
                    <table style="width: 100%;">
                        <thead>
                            <tr>
                                <td width="60%">商品名称</td>
                                <td width="20%">数量</td>
                                <td width="20%">单价</td>
                            </tr>
                        </thead>
                        <tbody class="dealWith">
                            
                        </tbody>
                    </table>
                </div>
                <div class="other_fee">
                    <div class="canh">
                        <label class="left">餐盒费</label>
                        <label class="right">0</label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="peis">
                        <label class="left">配送费</label>
                        <label class="right">0</label>
                        <div class="clearfix"></div>
                    </div>
                    <div class="manj">
                        <label class="left">立减优惠</label>
                        <label class="right">0</label>
                        <div class="clearfix"></div>
                    </div>
                </div>
                <div class="total">
                    <label class="left">总计</label>
                    <label class="right tatol"></label>
                    <div class="clearfix"></div>
                </div>
                <div style="text-align: right;">
                    <label>顾客已付款</label>
                </div>
                <span>**************************</span>
            </div>
            <div class="section5">
                <label>姓名：小花</label>
                <label>地址：北京</label>
                <label>电话：67890</label>
            </div>    
            <span>**************************</span>
        </div>
        <script type="text/javascript">
            window.onload = function(){
                //获取传递过来的参数
                var params = location.search;
                params = decodeURI(params);

                var arr = JSON.parse(params.slice(1));
                var tatol=0;
                $('.dealWith').html(arr.map(function(item){
                    // console.log(item.sale_price*item.goods_qty)
                    tatol+=item.sale_price*item.goods_qty;
                    return `<tr>
                        <td>${item.goods_classify}</td>
                        <td>${item.goods_qty}</td>
                        <td>${item.sale_price}</td>
                    </tr>`
                }));
                // console.log(tatol)
                $('.tatol').text(tatol)
                
            }
        </script>
    </body>
</html>